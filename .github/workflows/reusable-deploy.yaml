name: StackSpot Cloud Reusable

on:
  workflow_call:
    inputs:
      APPLICATION_FILE:
        required: true
        type: string
      IMAGE_TAG:
        required: true
        type: string
    secrets:
      CLIENT_REALM:
        required: true
      CLIENT_ID:
        required: true
      CLIENT_KEY:
        required: true

jobs:
  stk-cs-deploy:
    runs-on: engineering-runners-stg
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4.2.1
      - name: Deploy repo application
        uses: stack-spot/cloud-deploy-action@feat/1/action-stg
        id: deploy
        with:
          CLIENT_REALM: ${{ inputs.CLIENT_REALM }}
          CLIENT_ID: ${{ inputs.CLIENT_ID }}
          CLIENT_KEY: ${{ inputs.CLIENT_KEY }}
          APPLICATION_FILE: ${{ inputs.APPLICATION_FILE }}
          IMAGE_TAG: ${{ inputs.IMAGE_TAG }}
          VERBOSE: true
 